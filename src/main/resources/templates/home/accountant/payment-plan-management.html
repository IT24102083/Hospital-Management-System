<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
    <link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans:wght@400;500;700;900&family=Public+Sans:wght@400;500;700;900" onload="this.rel='stylesheet'" rel="stylesheet"/>
    <title>Payment Plan Management - HealthFirst</title>
    <link rel="icon" type="image/png" href="https://img.icons8.com/color/48/medical-cross.png">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
    <style type="text/tailwindcss">
        body {
            background-color: #f0f9ff;
            font-family: "Public Sans", "Noto Sans", sans-serif;
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        html, body { -ms-overflow-style: none; scrollbar-width: none; }
        html::-webkit-scrollbar, body::-webkit-scrollbar { display: none; }

        @media (max-width: 640px) {
            .responsive-table {
                display: block;
                width: 100%;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
        }
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        .status-on-track { background-color: #10b981; }
        .status-due-soon { background-color: #f59e0b; }
        .status-overdue { background-color: #ef4444; }
        .status-completed { background-color: #6b7280; }
    </style>
</head>
<body class="bg-[#f0f9ff]">
<div class="relative flex size-full min-h-screen flex-col overflow-x-hidden">

    <nav class="sticky top-0 z-50 w-full bg-white shadow-sm">
        <div class="container mx-auto flex justify-between items-center py-3 px-4">
            <a href="/dashboard" class="flex items-center">
                <i class="fas fa-heartbeat text-blue-600 text-2xl mr-2"></i>
                <span class="text-xl font-bold">Health<span class="text-blue-600">First</span></span>
            </a>
            <div class="hidden md:flex space-x-6">
                <a href="/dashboard" class="text-gray-700 hover:text-blue-600 font-medium py-1">Dashboard</a>
                <a href="/accountant/invoices" class="text-gray-700 hover:text-blue-600 font-medium py-1">Invoices</a>
                <a href="/accountant/payment-plans" class="text-blue-600 font-medium border-b-2 border-blue-600 py-1">Payment Plans</a>
                <a href="/accountant/reports" class="text-gray-700 hover:text-blue-600 font-medium py-1">Reports</a>
            </div>
            <div class="flex items-center space-x-3">
                <a href="/dashboard" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg">
                    <i class="fas fa-arrow-left mr-2"></i> Dashboard
                </a>
            </div>
        </div>
    </nav>

    <div class="layout-container flex h-full grow flex-col">
        <main class="flex-1 p-4 md:p-6">
            <div class="mb-6">
                <h1 class="text-2xl md:text-3xl font-bold text-slate-800">Payment Plan Management</h1>
                <p class="text-slate-600 mt-1">Monitor and manage patient payment plans and installments</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-white rounded-xl p-5 shadow-sm card-hover">
                    <div class="flex items-center justify-between">
                        <p class="text-base font-medium text-slate-600">Active Plans</p>
                        <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">
                            <i class="fas fa-calendar-check text-blue-600"></i>
                        </div>
                    </div>
                    <p class="text-3xl font-bold mt-2 text-slate-800" th:text="${activePlansCount ?: '24'}">24</p>
                    <p class="text-sm text-blue-600 mt-1">Currently active</p>
                </div>

                <div class="bg-white rounded-xl p-5 shadow-sm card-hover">
                    <div class="flex items-center justify-between">
                        <p class="text-base font-medium text-slate-600">Monthly Collections</p>
                        <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center">
                            <i class="fas fa-dollar-sign text-green-600"></i>
                        </div>
                    </div>
                    <p class="text-3xl font-bold mt-2 text-slate-800" th:text="${monthlyCollections ?: '$8,450'}">$8,450</p>
                    <p class="text-sm text-green-600 mt-1">Expected this month</p>
                </div>

                <div class="bg-white rounded-xl p-5 shadow-sm card-hover">
                    <div class="flex items-center justify-between">
                        <p class="text-base font-medium text-slate-600">Overdue Payments</p>
                        <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center">
                            <i class="fas fa-exclamation-triangle text-red-600"></i>
                        </div>
                    </div>
                    <p class="text-3xl font-bold mt-2 text-slate-800" th:text="${overduePayments ?: '3'}">3</p>
                    <p class="text-sm text-red-600 mt-1">Require attention</p>
                </div>

                <div class="bg-white rounded-xl p-5 shadow-sm card-hover">
                    <div class="flex items-center justify-between">
                        <p class="text-base font-medium text-slate-600">Total Outstanding</p>
                        <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center">
                            <i class="fas fa-chart-line text-purple-600"></i>
                        </div>
                    </div>
                    <p class="text-3xl font-bold mt-2 text-slate-800" th:text="${totalOutstanding ?: '$42,750'}">$42,750</p>
                    <p class="text-sm text-purple-600 mt-1">Across all plans</p>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0">
                    <div>
                        <h2 class="text-lg font-semibold text-gray-900">Payment Plans Overview</h2>
                        <p class="text-sm text-gray-600">Manage all active and completed payment plans</p>
                    </div>

                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3">
                        <select id="statusFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">All Statuses</option>
                            <option value="active">Active</option>
                            <option value="due-soon">Due Soon</option>
                            <option value="overdue">Overdue</option>
                            <option value="completed">Completed</option>
                        </select>

                        <button onclick="sendReminders()" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg font-medium">
                            <i class="fas fa-bell mr-2"></i>Send Reminders
                        </button>

                        <button onclick="exportPlansData()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium">
                            <i class="fas fa-download mr-2"></i>Export
                        </button>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-6">
                <div class="overflow-x-auto responsive-table">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Patient</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Invoice</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Plan Details</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progress</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Next Payment</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="paymentPlansTableBody">
                        <tr class="hover:bg-gray-50 transition-colors">
                            <td class="px-6 py-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3">
                                        <i class="fas fa-user text-blue-600"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-900">Sarah Williams</div>
                                        <div class="text-sm text-gray-500">sarah.w@email.com</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">INV-2024-120</div>
                                <div class="text-sm text-gray-500">$3,000.00 total</div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">6 months @ $500.00</div>
                                <div class="text-sm text-gray-500">Started: Jan 15, 2024</div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">3 of 6 payments</div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: 50%"></div>
                                </div>
                                <div class="text-xs text-gray-500 mt-1">$1,500 remaining</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">Oct 15, 2024</div>
                                <div class="text-sm text-gray-500">$500.00</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        <span class="status-indicator status-on-track"></span>On Track
                                    </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <div class="flex space-x-2">
                                    <button onclick="viewPlanDetails('plan-001')" class="text-blue-600 hover:text-blue-900">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button onclick="editPlan('plan-001')" class="text-indigo-600 hover:text-indigo-900">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="sendReminder('plan-001')" class="text-orange-600 hover:text-orange-900">
                                        <i class="fas fa-bell"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>

                        <tr class="hover:bg-gray-50 transition-colors">
                            <td class="px-6 py-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3">
                                        <i class="fas fa-user text-blue-600"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-900">Robert Brown</div>
                                        <div class="text-sm text-gray-500">robert.b@email.com</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">INV-2024-118</div>
                                <div class="text-sm text-gray-500">$2,400.00 total</div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">6 months @ $400.00</div>
                                <div class="text-sm text-gray-500">Started: Feb 20, 2024</div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">4 of 6 payments</div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 67%"></div>
                                </div>
                                <div class="text-xs text-gray-500 mt-1">$800 remaining</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">Oct 20, 2024</div>
                                <div class="text-sm text-gray-500">$400.00</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        <span class="status-indicator status-due-soon"></span>Due Soon
                                    </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <div class="flex space-x-2">
                                    <button onclick="viewPlanDetails('plan-002')" class="text-blue-600 hover:text-blue-900">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button onclick="editPlan('plan-002')" class="text-indigo-600 hover:text-indigo-900">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="sendReminder('plan-002')" class="text-orange-600 hover:text-orange-900">
                                        <i class="fas fa-bell"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>

                        <tr class="hover:bg-gray-50 transition-colors">
                            <td class="px-6 py-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3">
                                        <i class="fas fa-user text-blue-600"></i>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-900">Lisa Davis</div>
                                        <div class="text-sm text-gray-500">lisa.d@email.com</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">INV-2024-115</div>
                                <div class="text-sm text-gray-500">$1,800.00 total</div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">6 months @ $300.00</div>
                                <div class="text-sm text-gray-500">Started: Mar 10, 2024</div>
                            </td>
                            <td class="px-6 py-4">
                                <div class="text-sm text-gray-900">4 of 6 payments</div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-red-500 h-2 rounded-full" style="width: 67%"></div>
                                </div>
                                <div class="text-xs text-gray-500 mt-1">$600 remaining</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium text-gray-900">Oct 10, 2024</div>
                                <div class="text-sm text-red-600">$300.00 (5 days overdue)</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        <span class="status-indicator status-overdue"></span>Overdue
                                    </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <div class="flex space-x-2">
                                    <button onclick="viewPlanDetails('plan-003')" class="text-blue-600 hover:text-blue-900">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button onclick="editPlan('plan-003')" class="text-indigo-600 hover:text-indigo-900">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="contactPatient('plan-003')" class="text-red-600 hover:text-red-900">
                                        <i class="fas fa-phone"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                        <i class="fas fa-calendar-alt text-blue-600 mr-2"></i>Upcoming Payments
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg">
                            <div>
                                <p class="font-medium text-gray-900">Tomorrow</p>
                                <p class="text-sm text-gray-600">2 payments due</p>
                            </div>
                            <span class="text-yellow-600 font-bold">$700</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                            <div>
                                <p class="font-medium text-gray-900">This Week</p>
                                <p class="text-sm text-gray-600">5 payments due</p>
                            </div>
                            <span class="text-blue-600 font-bold">$1,800</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-purple-50 rounded-lg">
                            <div>
                                <p class="font-medium text-gray-900">Next Week</p>
                                <p class="text-sm text-gray-600">7 payments due</p>
                            </div>
                            <span class="text-purple-600 font-bold">$2,350</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                        <i class="fas fa-chart-pie text-green-600 mr-2"></i>Collection Stats
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">On-time Rate:</span>
                            <span class="font-bold text-green-600">92%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 92%"></div>
                        </div>

                        <div class="flex justify-between mt-4">
                            <span class="text-gray-600">This Month:</span>
                            <span class="font-bold text-blue-600">$7,200</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Expected:</span>
                            <span class="font-bold text-gray-600">$8,450</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-blue-500 h-2 rounded-full" style="width: 85%"></div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                        <i class="fas fa-tools text-orange-600 mr-2"></i>Quick Actions
                    </h3>
                    <div class="space-y-3">
                        <button onclick="bulkSendReminders()" class="w-full bg-orange-50 hover:bg-orange-100 text-orange-800 font-medium py-2 px-4 rounded-lg border border-orange-200 transition">
                            <i class="fas fa-envelope mr-2"></i>Send All Reminders
                        </button>
                        <button onclick="generateCollectionReport()" class="w-full bg-blue-50 hover:bg-blue-100 text-blue-800 font-medium py-2 px-4 rounded-lg border border-blue-200 transition">
                            <i class="fas fa-chart-bar mr-2"></i>Collection Report
                        </button>
                        <button onclick="exportOverdueList()" class="w-full bg-red-50 hover:bg-red-100 text-red-800 font-medium py-2 px-4 rounded-lg border border-red-200 transition">
                            <i class="fas fa-exclamation-triangle mr-2"></i>Export Overdue
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <footer class="py-4 px-6 text-center text-sm text-slate-600">
            <p>© 2025 HealthFirst Hospital Management System</p>
        </footer>
    </div>
</div>

<div id="planDetailsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
        <div class="flex justify-between items-center p-6 border-b">
            <h2 class="text-xl font-bold text-gray-900">Payment Plan Details</h2>
            <button onclick="closePlanDetailsModal()" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        <div id="planDetailsContent" class="p-6">
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Status filter functionality
        document.getElementById('statusFilter').addEventListener('change', function() {
            filterPaymentPlans(this.value);
        });
    });

    function filterPaymentPlans(status) {
        const rows = document.querySelectorAll('#paymentPlansTableBody tr');

        rows.forEach(row => {
            if (status === '') {
                row.style.display = '';
            } else {
                const statusElement = row.querySelector('span[class*="bg-"]');
                const rowStatus = getStatusFromElement(statusElement);

                if (rowStatus === status) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            }
        });
    }

    function getStatusFromElement(element) {
        if (element.classList.contains('bg-green-100')) return 'active';
        if (element.classList.contains('bg-yellow-100')) return 'due-soon';
        if (element.classList.contains('bg-red-100')) return 'overdue';
        if (element.classList.contains('bg-gray-100')) return 'completed';
        return '';
    }

    function viewPlanDetails(planId) {
        // Show modal with plan details
        const modal = document.getElementById('planDetailsModal');
        const content = document.getElementById('planDetailsContent');

        // Sample plan details (would be loaded from API)
        content.innerHTML = `
            <div class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-semibold text-gray-900 mb-3">Plan Information</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>Plan ID:</span>
                                <span class="font-medium">${planId}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Total Amount:</span>
                                <span class="font-medium">$3,000.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Monthly Payment:</span>
                                <span class="font-medium">$500.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Duration:</span>
                                <span class="font-medium">6 months</span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="font-semibold text-gray-900 mb-3">Payment History</h3>
                        <div class="space-y-2">
                            <div class="flex justify-between items-center p-2 bg-green-50 rounded">
                                <span class="text-sm">Payment 1 - Jan 15</span>
                                <span class="text-sm font-medium text-green-600">$500.00 ✓</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-green-50 rounded">
                                <span class="text-sm">Payment 2 - Feb 15</span>
                                <span class="text-sm font-medium text-green-600">$500.00 ✓</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-green-50 rounded">
                                <span class="text-sm">Payment 3 - Mar 15</span>
                                <span class="text-sm font-medium text-green-600">$500.00 ✓</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-yellow-50 rounded">
                                <span class="text-sm">Payment 4 - Apr 15</span>
                                <span class="text-sm font-medium text-yellow-600">$500.00 Due</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;

        modal.classList.remove('hidden');
    }

    function closePlanDetailsModal() {
        document.getElementById('planDetailsModal').classList.add('hidden');
    }

    function editPlan(planId) {
        window.location.href = `/accountant/payment-plans/${planId}/edit`;
    }

    function sendReminder(planId) {
        if (confirm('Send payment reminder to patient?')) {
            // Implementation would send reminder via API
            alert('Reminder sent successfully!');
        }
    }

    function contactPatient(planId) {
        window.location.href = `/accountant/payment-plans/${planId}/contact`;
    }

    function sendReminders() {
        if (confirm('Send reminders to all patients with upcoming payments?')) {
            alert('Bulk reminders sent successfully!');
        }
    }

    function exportPlansData() {
        // Implementation would export data to Excel/CSV
        alert('Exporting payment plans data...');
    }

    function bulkSendReminders() {
        if (confirm('Send reminders to all patients with due payments?')) {
            alert('Bulk reminders sent!');
        }
    }

    function generateCollectionReport() {
        window.location.href = '/accountant/reports?type=collections';
    }

    function exportOverdueList() {
        alert('Exporting overdue payments list...');
    }
</script>
</body>
</html>
}

<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">-->
<!--<head>-->
<!--    <meta charset="utf-8"/>-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>-->
<!--    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>-->
<!--    <link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans:wght@400;500;700;900&family=Public+Sans:wght@400;500;700;900" onload="this.rel='stylesheet'" rel="stylesheet"/>-->
<!--    <title>Payment Plan Management - HealthFirst</title>-->
<!--    <link rel="icon" type="image/png" href="https://img.icons8.com/color/48/medical-cross.png">-->
<!--    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>-->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>-->
<!--    <style type="text/tailwindcss">-->
<!--        body {-->
<!--            background-color: #f0f9ff;-->
<!--            font-family: "Public Sans", "Noto Sans", sans-serif;-->
<!--        }-->
<!--        .card-hover {-->
<!--            transition: all 0.3s ease;-->
<!--        }-->
<!--        .card-hover:hover {-->
<!--            transform: translateY(-5px);-->
<!--            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);-->
<!--        }-->
<!--        @media (max-width: 640px) {-->
<!--            .responsive-table {-->
<!--                display: block;-->
<!--                width: 100%;-->
<!--                overflow-x: auto;-->
<!--                -webkit-overflow-scrolling: touch;-->
<!--            }-->
<!--        }-->
<!--        .status-indicator {-->
<!--            width: 12px;-->
<!--            height: 12px;-->
<!--            border-radius: 50%;-->
<!--            display: inline-block;-->
<!--            margin-right: 8px;-->
<!--        }-->
<!--        .status-on-track { background-color: #10b981; }-->
<!--        .status-due-soon { background-color: #f59e0b; }-->
<!--        .status-overdue { background-color: #ef4444; }-->
<!--        .status-completed { background-color: #6b7280; }-->
<!--    </style>-->
<!--</head>-->
<!--<body class="bg-[#f0f9ff]">-->
<!--<div class="relative flex size-full min-h-screen flex-col overflow-x-hidden">-->

<!--    <nav class="sticky top-0 z-50 w-full bg-white shadow-sm">-->
<!--        <div class="container mx-auto flex justify-between items-center py-3 px-4">-->
<!--            <a href="/dashboard" class="flex items-center">-->
<!--                <i class="fas fa-heartbeat text-blue-600 text-2xl mr-2"></i>-->
<!--                <span class="text-xl font-bold">Health<span class="text-blue-600">First</span></span>-->
<!--            </a>-->
<!--            <div class="hidden md:flex space-x-6">-->
<!--                <a href="/dashboard" class="text-gray-700 hover:text-blue-600 font-medium py-1">Dashboard</a>-->
<!--                <a href="/accountant/invoices" class="text-gray-700 hover:text-blue-600 font-medium py-1">Invoices</a>-->
<!--                <a href="/accountant/payment-plans" class="text-blue-600 font-medium border-b-2 border-blue-600 py-1">Payment Plans</a>-->
<!--                <a href="/accountant/reports" class="text-gray-700 hover:text-blue-600 font-medium py-1">Reports</a>-->
<!--            </div>-->
<!--            <div class="flex items-center space-x-3">-->
<!--                <a href="/accountant/dashboard" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg">-->
<!--                    <i class="fas fa-arrow-left mr-2"></i> Dashboard-->
<!--                </a>-->
<!--            </div>-->
<!--        </div>-->
<!--    </nav>-->

<!--    <div class="layout-container flex h-full grow flex-col">-->
<!--        <main class="flex-1 p-4 md:p-6">-->
<!--            <div class="mb-6">-->
<!--                <h1 class="text-2xl md:text-3xl font-bold text-slate-800">Payment Plan Management</h1>-->
<!--                <p class="text-slate-600 mt-1">Monitor and manage patient payment plans and installments</p>-->
<!--            </div>-->

<!--            &lt;!&ndash; Statistics Cards - Using Thymeleaf data from controller &ndash;&gt;-->
<!--            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">-->
<!--                <div class="bg-white rounded-xl p-5 shadow-sm card-hover">-->
<!--                    <div class="flex items-center justify-between">-->
<!--                        <p class="text-base font-medium text-slate-600">Active Plans</p>-->
<!--                        <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">-->
<!--                            <i class="fas fa-calendar-check text-blue-600"></i>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <p class="text-3xl font-bold mt-2 text-slate-800" th:text="${activePlansCount != null ? activePlansCount : 0}">0</p>-->
<!--                    <p class="text-sm text-blue-600 mt-1">Currently active</p>-->
<!--                </div>-->

<!--                <div class="bg-white rounded-xl p-5 shadow-sm card-hover">-->
<!--                    <div class="flex items-center justify-between">-->
<!--                        <p class="text-base font-medium text-slate-600">Monthly Collections</p>-->
<!--                        <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center">-->
<!--                            <i class="fas fa-dollar-sign text-green-600"></i>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <p class="text-3xl font-bold mt-2 text-slate-800" th:text="${monthlyCollections != null ? '$' + #numbers.formatDecimal(monthlyCollections, 1, 2) : '$0.00'}">$0.00</p>-->
<!--                    <p class="text-sm text-green-600 mt-1">Expected this month</p>-->
<!--                </div>-->

<!--                <div class="bg-white rounded-xl p-5 shadow-sm card-hover">-->
<!--                    <div class="flex items-center justify-between">-->
<!--                        <p class="text-base font-medium text-slate-600">Overdue Payments</p>-->
<!--                        <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center">-->
<!--                            <i class="fas fa-exclamation-triangle text-red-600"></i>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <p class="text-3xl font-bold mt-2 text-slate-800" th:text="${overduePayments != null ? overduePayments : 0}">0</p>-->
<!--                    <p class="text-sm text-red-600 mt-1">Require attention</p>-->
<!--                </div>-->

<!--                <div class="bg-white rounded-xl p-5 shadow-sm card-hover">-->
<!--                    <div class="flex items-center justify-between">-->
<!--                        <p class="text-base font-medium text-slate-600">Total Outstanding</p>-->
<!--                        <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center">-->
<!--                            <i class="fas fa-chart-line text-purple-600"></i>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                    <p class="text-3xl font-bold mt-2 text-slate-800" th:text="${totalOutstanding != null ? '$' + #numbers.formatDecimal(totalOutstanding, 1, 2) : '$0.00'}">$0.00</p>-->
<!--                    <p class="text-sm text-purple-600 mt-1">Across all plans</p>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="bg-white rounded-lg shadow-sm p-6 mb-6">-->
<!--                <div class="flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0">-->
<!--                    <div>-->
<!--                        <h2 class="text-lg font-semibold text-gray-900">Payment Plans Overview</h2>-->
<!--                        <p class="text-sm text-gray-600">Manage all active and completed payment plans</p>-->
<!--                    </div>-->

<!--                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3">-->
<!--                        <select id="statusFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">-->
<!--                            <option value="">All Statuses</option>-->
<!--                            <option value="ACTIVE">Active</option>-->
<!--                            <option value="COMPLETED">Completed</option>-->
<!--                            <option value="SUSPENDED">Suspended</option>-->
<!--                            <option value="CANCELLED">Cancelled</option>-->
<!--                        </select>-->

<!--                        <button onclick="sendReminders()" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg font-medium">-->
<!--                            <i class="fas fa-bell mr-2"></i>Send Reminders-->
<!--                        </button>-->

<!--                        <button onclick="exportPlansData()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium">-->
<!--                            <i class="fas fa-download mr-2"></i>Export-->
<!--                        </button>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->

<!--            &lt;!&ndash; Payment Plans Table - Using Thymeleaf data from controller &ndash;&gt;-->
<!--            <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-6">-->
<!--                <div class="overflow-x-auto responsive-table">-->
<!--                    <table class="min-w-full divide-y divide-gray-200">-->
<!--                        <thead class="bg-gray-50">-->
<!--                        <tr>-->
<!--                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Patient</th>-->
<!--                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Invoice</th>-->
<!--                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Plan Details</th>-->
<!--                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progress</th>-->
<!--                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Next Payment</th>-->
<!--                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>-->
<!--                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody class="bg-white divide-y divide-gray-200" id="paymentPlansTableBody">-->
<!--                        &lt;!&ndash; Thymeleaf iteration over payment plans &ndash;&gt;-->
<!--                        <tr th:each="plan : ${paymentPlans}" class="hover:bg-gray-50 transition-colors" th:attr="data-status=${plan.status}">-->
<!--                            <td class="px-6 py-4">-->
<!--                                <div class="flex items-center">-->
<!--                                    <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3">-->
<!--                                        <i class="fas fa-user text-blue-600"></i>-->
<!--                                    </div>-->
<!--                                    <div>-->
<!--                                        <div class="text-sm font-medium text-gray-900" th:text="${plan.patient.firstName + ' ' + plan.patient.lastName}">Patient Name</div>-->
<!--                                        <div class="text-sm text-gray-500" th:text="${plan.patient.email}">email@example.com</div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                            <td class="px-6 py-4 whitespace-nowrap">-->
<!--                                <div class="text-sm font-medium text-gray-900" th:text="${plan.invoice.invoiceNumber}">INV-0000</div>-->
<!--                                <div class="text-sm text-gray-500" th:text="'$' + ${#numbers.formatDecimal(plan.totalAmount, 1, 2)} + ' total'">$0.00 total</div>-->
<!--                            </td>-->
<!--                            <td class="px-6 py-4">-->
<!--                                <div class="text-sm text-gray-900" th:text="${plan.numberOfPayments + ' months @ $' + #numbers.formatDecimal(plan.monthlyPayment, 1, 2)}">0 months @ $0.00</div>-->
<!--                                <div class="text-sm text-gray-500" th:text="'Started: ' + ${#temporals.format(plan.startDate, 'MMM dd, yyyy')}">Started: Jan 1, 2024</div>-->
<!--                            </td>-->
<!--                            <td class="px-6 py-4">-->
<!--                                <div class="text-sm text-gray-900" th:text="${plan.paymentsMade + ' of ' + plan.numberOfPayments + ' payments'}">0 of 0 payments</div>-->
<!--                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">-->
<!--                                    <div class="bg-blue-600 h-2 rounded-full" th:style="'width: ' + ${plan.numberOfPayments > 0 ? (plan.paymentsMade * 100.0 / plan.numberOfPayments) : 0} + '%'"></div>-->
<!--                                </div>-->
<!--                                <div class="text-xs text-gray-500 mt-1" th:text="'$' + ${#numbers.formatDecimal(plan.remainingBalance, 1, 2)} + ' remaining'">$0.00 remaining</div>-->
<!--                            </td>-->
<!--                            <td class="px-6 py-4 whitespace-nowrap">-->
<!--                                <div class="text-sm font-medium text-gray-900" th:text="${plan.nextPaymentDate != null ? #temporals.format(plan.nextPaymentDate, 'MMM dd, yyyy') : 'N/A'}">Jan 1, 2024</div>-->
<!--                                <div class="text-sm text-gray-500" th:text="'$' + ${#numbers.formatDecimal(plan.monthlyPayment, 1, 2)}">$0.00</div>-->
<!--                            </td>-->
<!--                            <td class="px-6 py-4 whitespace-nowrap">-->
<!--                                <span th:if="${plan.status.name() == 'ACTIVE'}" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">-->
<!--                                    <span class="status-indicator status-on-track"></span>Active-->
<!--                                </span>-->
<!--                                <span th:if="${plan.status.name() == 'COMPLETED'}" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">-->
<!--                                    <span class="status-indicator status-completed"></span>Completed-->
<!--                                </span>-->
<!--                                <span th:if="${plan.status.name() == 'SUSPENDED'}" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">-->
<!--                                    <span class="status-indicator status-due-soon"></span>Suspended-->
<!--                                </span>-->
<!--                                <span th:if="${plan.status.name() == 'CANCELLED'}" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">-->
<!--                                    <span class="status-indicator status-overdue"></span>Cancelled-->
<!--                                </span>-->
<!--                            </td>-->
<!--                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">-->
<!--                                <div class="flex space-x-2">-->
<!--                                    <a th:href="@{/accountant/payment-plans/{id}(id=${plan.id})}" class="text-blue-600 hover:text-blue-900">-->
<!--                                        <i class="fas fa-eye"></i>-->
<!--                                    </a>-->
<!--                                    <button th:onclick="'editPlan(' + ${plan.id} + ')'" class="text-indigo-600 hover:text-indigo-900">-->
<!--                                        <i class="fas fa-edit"></i>-->
<!--                                    </button>-->
<!--                                    <button th:onclick="'sendReminder(' + ${plan.id} + ')'" class="text-orange-600 hover:text-orange-900">-->
<!--                                        <i class="fas fa-bell"></i>-->
<!--                                    </button>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                        </tr>-->

<!--                        &lt;!&ndash; Empty state &ndash;&gt;-->
<!--                        <tr th:if="${#lists.isEmpty(paymentPlans)}">-->
<!--                            <td colspan="7" class="px-6 py-12 text-center">-->
<!--                                <div class="text-gray-500">-->
<!--                                    <i class="fas fa-inbox text-4xl mb-4"></i>-->
<!--                                    <p class="text-lg font-medium">No payment plans found</p>-->
<!--                                    <p class="text-sm">Payment plans will appear here once created.</p>-->
<!--                                </div>-->
<!--                            </td>-->
<!--                        </tr>-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">-->
<!--                <div class="bg-white rounded-lg shadow-sm p-6">-->
<!--                    <h3 class="text-lg font-semibold text-gray-900 mb-4">-->
<!--                        <i class="fas fa-calendar-alt text-blue-600 mr-2"></i>Upcoming Payments-->
<!--                    </h3>-->
<!--                    <div class="space-y-3">-->
<!--                        <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg">-->
<!--                            <div>-->
<!--                                <p class="font-medium text-gray-900">Tomorrow</p>-->
<!--                                <p class="text-sm text-gray-600">2 payments due</p>-->
<!--                            </div>-->
<!--                            <span class="text-yellow-600 font-bold">$700</span>-->
<!--                        </div>-->
<!--                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">-->
<!--                            <div>-->
<!--                                <p class="font-medium text-gray-900">This Week</p>-->
<!--                                <p class="text-sm text-gray-600">5 payments due</p>-->
<!--                            </div>-->
<!--                            <span class="text-blue-600 font-bold">$1,800</span>-->
<!--                        </div>-->
<!--                        <div class="flex justify-between items-center p-3 bg-purple-50 rounded-lg">-->
<!--                            <div>-->
<!--                                <p class="font-medium text-gray-900">Next Week</p>-->
<!--                                <p class="text-sm text-gray-600">7 payments due</p>-->
<!--                            </div>-->
<!--                            <span class="text-purple-600 font-bold">$2,350</span>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div class="bg-white rounded-lg shadow-sm p-6">-->
<!--                    <h3 class="text-lg font-semibold text-gray-900 mb-4">-->
<!--                        <i class="fas fa-chart-pie text-green-600 mr-2"></i>Collection Stats-->
<!--                    </h3>-->
<!--                    <div class="space-y-3">-->
<!--                        <div class="flex justify-between">-->
<!--                            <span class="text-gray-600">On-time Rate:</span>-->
<!--                            <span class="font-bold text-green-600">92%</span>-->
<!--                        </div>-->
<!--                        <div class="w-full bg-gray-200 rounded-full h-2">-->
<!--                            <div class="bg-green-500 h-2 rounded-full" style="width: 92%"></div>-->
<!--                        </div>-->

<!--                        <div class="flex justify-between mt-4">-->
<!--                            <span class="text-gray-600">This Month:</span>-->
<!--                            <span class="font-bold text-blue-600" th:text="${monthlyCollections != null ? '$' + #numbers.formatDecimal(monthlyCollections, 1, 2) : '$0.00'}">$0.00</span>-->
<!--                        </div>-->
<!--                        <div class="flex justify-between">-->
<!--                            <span class="text-gray-600">Expected:</span>-->
<!--                            <span class="font-bold text-gray-600" th:text="${monthlyCollections != null ? '$' + #numbers.formatDecimal(monthlyCollections, 1, 2) : '$0.00'}">$0.00</span>-->
<!--                        </div>-->
<!--                        <div class="w-full bg-gray-200 rounded-full h-2">-->
<!--                            <div class="bg-blue-500 h-2 rounded-full" style="width: 85%"></div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div class="bg-white rounded-lg shadow-sm p-6">-->
<!--                    <h3 class="text-lg font-semibold text-gray-900 mb-4">-->
<!--                        <i class="fas fa-tools text-orange-600 mr-2"></i>Quick Actions-->
<!--                    </h3>-->
<!--                    <div class="space-y-3">-->
<!--                        <button onclick="bulkSendReminders()" class="w-full bg-orange-50 hover:bg-orange-100 text-orange-800 font-medium py-2 px-4 rounded-lg border border-orange-200 transition">-->
<!--                            <i class="fas fa-envelope mr-2"></i>Send All Reminders-->
<!--                        </button>-->
<!--                        <button onclick="generateCollectionReport()" class="w-full bg-blue-50 hover:bg-blue-100 text-blue-800 font-medium py-2 px-4 rounded-lg border border-blue-200 transition">-->
<!--                            <i class="fas fa-chart-bar mr-2"></i>Collection Report-->
<!--                        </button>-->
<!--                        <button onclick="exportOverdueList()" class="w-full bg-red-50 hover:bg-red-100 text-red-800 font-medium py-2 px-4 rounded-lg border border-red-200 transition">-->
<!--                            <i class="fas fa-exclamation-triangle mr-2"></i>Export Overdue-->
<!--                        </button>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </main>-->

<!--        <footer class="py-4 px-6 text-center text-sm text-slate-600">-->
<!--            <p>© 2025 HealthFirst Hospital Management System</p>-->
<!--        </footer>-->
<!--    </div>-->
<!--</div>-->

<!--<div id="planDetailsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">-->
<!--    <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">-->
<!--        <div class="flex justify-between items-center p-6 border-b">-->
<!--            <h2 class="text-xl font-bold text-gray-900">Payment Plan Details</h2>-->
<!--            <button onclick="closePlanDetailsModal()" class="text-gray-500 hover:text-gray-700">-->
<!--                <i class="fas fa-times text-xl"></i>-->
<!--            </button>-->
<!--        </div>-->
<!--        <div id="planDetailsContent" class="p-6">-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        // Status filter functionality-->
<!--        document.getElementById('statusFilter').addEventListener('change', function() {-->
<!--            filterPaymentPlans(this.value);-->
<!--        });-->
<!--    });-->

<!--    function filterPaymentPlans(status) {-->
<!--        const rows = document.querySelectorAll('#paymentPlansTableBody tr[data-status]');-->

<!--        rows.forEach(row => {-->
<!--            if (status === '' || row.getAttribute('data-status') === status) {-->
<!--                row.style.display = '';-->
<!--            } else {-->
<!--                row.style.display = 'none';-->
<!--            }-->
<!--        });-->
<!--    }-->

<!--    function viewPlanDetails(planId) {-->
<!--        window.location.href = '/accountant/payment-plans/' + planId;-->
<!--    }-->

<!--    function closePlanDetailsModal() {-->
<!--        document.getElementById('planDetailsModal').classList.add('hidden');-->
<!--    }-->

<!--    function editPlan(planId) {-->
<!--        window.location.href = '/accountant/payment-plans/' + planId + '/edit';-->
<!--    }-->

<!--    function sendReminder(planId) {-->
<!--        if (confirm('Send payment reminder to patient?')) {-->
<!--            alert('Reminder sent successfully!');-->
<!--        }-->
<!--    }-->

<!--    function contactPatient(planId) {-->
<!--        window.location.href = '/accountant/payment-plans/' + planId + '/contact';-->
<!--    }-->

<!--    function sendReminders() {-->
<!--        if (confirm('Send reminders to all patients with upcoming payments?')) {-->
<!--            alert('Bulk reminders sent successfully!');-->
<!--        }-->
<!--    }-->

<!--    function exportPlansData() {-->
<!--        alert('Exporting payment plans data...');-->
<!--    }-->

<!--    function bulkSendReminders() {-->
<!--        if (confirm('Send reminders to all patients with due payments?')) {-->
<!--            alert('Bulk reminders sent!');-->
<!--        }-->
<!--    }-->

<!--    function generateCollectionReport() {-->
<!--        window.location.href = '/accountant/reports?type=collections';-->
<!--    }-->

<!--    function exportOverdueList() {-->
<!--        alert('Exporting overdue payments list...');-->
<!--    }-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
